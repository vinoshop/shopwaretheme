{% sw_extends '@Storefront/storefront/base.html.twig' %}
{% set large_header_margin = false %}
{% block base_main %}
    {% set manufacturer = manufacturer.entities.elements|first %}
    {% if manufacturer %}
        <div class="winzerpage container">
            <div class="winzerpage-img container"
                 style="background-image: url('{{ manufacturer.customFields['vs_winzer_main_img'] }}')">
                <div class="winzerpage-name container">
                    {# Daten #}
                    <h1>{{ manufacturer.name }}</h1>
                    <p>{{ manufacturer.customFields['vs_winzer_bundesland'] }}</p>
                </div>
            </div>
            <div class="winzerpage-story container">
                {# beschreibung #}
                <h4 class="winzerpage-story-header">{{ manufacturer.customFields['vs_winzer_story_header']|raw }}</h4>
                <div class="winzerpage-story-helper">
                    <p class="winzerpage-story-content">
                        {{ manufacturer.customFields['vs_winzer_story_p1']|raw }}
                    </p>
                </div>

                {# Quote #}
                <div class="winzerpage-story-quote container">
                    <div id="winzerpage-story-quote-img"></div>
                    <div id="winzerpage-story-quote-centerer">
                        <div id="winzerpage-story-quote-centerer-2">
                            <p class="winzerpage-story-quote-header">"{{ manufacturer.customFields['vs_winzer_quote']|raw }}"</p>
                            <p class="winzerpage-story-quote-name">
                                -{{ manufacturer.customFields['vs_winzer_quote_name']|raw }}</p>
                        </div>
                    </div>
                    <div id="winzerpage-story-quote-img-2"></div>
                </div>
                <div class="winzerpage-story-helper">
                    <p class="winzerpage-story-content">
                        {{ manufacturer.customFields['vs_winzer_story_p2']|raw }}
                    </p>
                </div>
            </div>
            <div class="winzerpage-media container">
                {# Galerie #}
                <div class="winzerpage-media-helper">
                    <p class="winzerpage-media-header">
                        {% if manufacturer.customFields['vs_winzer_imageGallery_header'] %}
                            {{ manufacturer.customFields['vs_winzer_imageGallery_header'] }}
                        {% else %}
                            ZU BESUCH BEIM WINZERHOF
                        {% endif %}
                    </p>
                    {# ImageSlider #}
                    {% set images = manufacturer.customFields['vs_winzer_media']|split(';') %}
                    {% set index = 0 %}
                    <div id="imageSlider" class="carousel slide " data-ride="carousel">
                        <ol class="carousel-indicators ">
                            {% for image in images %}
                                {% if loop.first %}
                                    <li data-target="#imageSlider" data-slide-to="{{ index }}" class="active"></li>
                                    {% set index = index + 1 %}
                                {% else %}
                                    <li data-target="#imageSlider" data-slide-to="{{ index }}"></li>
                                    {% set index = index + 1 %}
                                {% endif %}
                            {% endfor %}
                        </ol>
                        <div class="carousel-inner ">
                            {% set index = 0 %}
                            {% for image in images %}
                                {% if loop.first %}
                                    <div class="carousel-item active  ">
                                        <!-- <img src="{{ image }}" class="d-block mx-auto"  alt="{{ image }}">-->
                                        <div style="background-image: url('{{ image }}');"
                                             class="d-block mx-auto carousel-divs carousel-item-max-height"></div>
                                    </div>
                                    {% set index = index + 1 %}
                                {% else %}
                                    <div style="background-image: url('{{ image }}');"
                                         class="carousel-item carousel-item-max-height carousel-divs">
                                        <!--   <img  src="{{ image }}" class="d-block mx-auto"  alt="{{ image }}">-->

                                    </div>
                                    {% set index = index + 1 %}
                                {% endif %}
                            {% endfor %}
                        </div>
                        <a class="carousel-control-prev" href="#imageSlider" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#imageSlider" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>

                    {# Video #}
                    <div class="winzerpage-media-video">
                        <iframe class="winzerpage-media-video-size" src="{{ manufacturer.customFields['vs_winzer_video'] }}"
                                title="YouTube video player" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            <div class="winzerpage-products container">
                {# restliche Produkte #}
                <p class="winzerpage-products-header">
                    {% if manufacturer.customFields['vs_winzer_products_header'] %}
                        {{ manufacturer.customFields['vs_winzer_products_header'] }}
                    {% else %}
                        PRÃ„MIERTE WEINE VON MAX MUSTERMANN
                    {% endif %}
                </p>
                <div class="winzerpage-products-flexbox">
                    {# produkte #}
                    {% for product in manufacturer.products.elements %}
                        {% sw_include '@Storefront/storefront/component/product/card/box-standard.html.twig' with {
                            'product': product,
                        } %}
                    {% endfor %}
                </div>
            </div>
        </div>
    {% else %}
        {% sw_include '@Storefront/storefront/page/error/error-404.html.twig' %}
    {% endif %}
{% endblock %}